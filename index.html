<!DOCTYPE html>
<html>
<head>
  <title>Äiá»u khiá»ƒn báº±ng Giá»ng NÃ³i</title>
</head>
<body>
  <h2>ğŸ™ Äiá»u khiá»ƒn thiáº¿t bá»‹ báº±ng Giá»ng NÃ³i</h2>
  <button onclick="startRecognition()">Báº¯t Ä‘áº§u nháº­n lá»‡nh</button>
  <p id="status">â³ Äang chá» lá»‡nh...</p>

  <script>
    const espIp = "http://192.168.1.100"; // Thay báº±ng IP ESP32 cá»§a báº¡n

    function startRecognition() {
      const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
      recognition.lang = 'vi-VN';
      recognition.start();

      recognition.onresult = function(event) {
        const voiceCommand = event.results[0][0].transcript;
        document.getElementById("status").innerText = "Báº¡n Ä‘Ã£ nÃ³i: " + voiceCommand;
        sendCommand(voiceCommand);
      };

      recognition.onerror = function(event) {
        document.getElementById("status").innerText = "âŒ Lá»—i nháº­n diá»‡n: " + event.error;
      };
    }

    function sendCommand(cmd) {
      const url = `${espIp}/lenh?cmd=${encodeURIComponent(cmd)}`;
      fetch(url)
        .then(response => response.text())
        .then(data => {
          document.getElementById("status").innerText += "\nâœ… ESP tráº£ lá»i: " + data;
        })
        .catch(error => {
          document.getElementById("status").innerText += "\nâš ï¸ Gá»­i tháº¥t báº¡i: " + error;
        });
    }
  </script>
</body>
</html>
